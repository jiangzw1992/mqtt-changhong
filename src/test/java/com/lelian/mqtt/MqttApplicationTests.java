package com.lelian.mqtt;

import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import com.lelian.mqtt.service.SLRemoteService;
import com.lelian.mqtt.service.ServiceApi;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

import java.io.IOException;

@RunWith(SpringRunner.class)
@SpringBootTest
public class MqttApplicationTests {

	@Autowired
	SLRemoteService slRemoteService;

	@Test
	public void ttt() throws IOException {
		String result = "{\n" +
				"    \"code\": 200,\n" +
				"    \"data\": [\n" +
				"        {\n" +
				"            \"61.01.13.000001.0102.01.004.008.99:014\": [\n" +
				"                {\n" +
				"                    \"param\": \"tn\",\n" +
				"                    \"time\": 1570630800000,\n" +
				"                    \"value\": 19.7\n" +
				"                }\n" +
				"            ]\n" +
				"        },\n" +
				"        {\n" +
				"            \"61.01.13.000001.0102.01.004.008.99:015\": [\n" +
				"                {\n" +
				"                    \"param\": \"tn\",\n" +
				"                    \"time\": 1570630800000,\n" +
				"                    \"value\": 19.4\n" +
				"                }\n" +
				"            ]\n" +
				"        }\n" +
				"    ],\n" +
				"    \"msg\": \"成功\",\n" +
				"    \"page\": 1,\n" +
				"    \"totalCount\": 2,\n" +
				"    \"totalPage\": 1\n" +
				"}";
		slRemoteService.initSLMap();
		JSONObject jsonObject = JSONObject.parseObject(result);
		slRemoteService.handle(jsonObject);
	}

	@Test
	public void dddd() throws IOException {
		String json = "{\"status\":\"100\",\"data\":[{\"alias\":\"开关机\",\"dataAddress\":\"8\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"1\",\"itemname\":\"开关机\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"1\"},{\"alias\":\"模式\",\"dataAddress\":\"8\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"2\",\"itemname\":\"模式\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"2\"},{\"alias\":\"设定温度整数\",\"dataAddress\":\"11\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"3\",\"itemname\":\"设定温度整数\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"90\"},{\"alias\":\"室内环境温度\",\"dataAddress\":\"12\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"4\",\"itemname\":\"室内环境温度\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"73\"},{\"alias\":\"室外环境温度\",\"dataAddress\":\"13\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"5\",\"itemname\":\"室外环境温度\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"54\"},{\"alias\":\"室内相对湿度\",\"dataAddress\":\"14\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"6\",\"itemname\":\"室内相对湿度\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"3\"},{\"alias\":\"室温1\",\"dataAddress\":\"21\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"7\",\"itemname\":\"室温1\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"73\"},{\"alias\":\"线控器温度\",\"dataAddress\":\"25\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"8\",\"itemname\":\"线控器温度\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"54\"},{\"alias\":\"内盘温度\",\"dataAddress\":\"26\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"9\",\"itemname\":\"内盘温度\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"50\"},{\"alias\":\"内机冷媒入口温度\",\"dataAddress\":\"27\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"10\",\"itemname\":\"内机冷媒入口温度\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"91\"},{\"alias\":\"内机冷媒出口温度\",\"dataAddress\":\"28\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"11\",\"itemname\":\"内机冷媒出口温度\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"101\"},{\"alias\":\"回水温度\",\"dataAddress\":\"31\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"12\",\"itemname\":\"回水温度\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"87\"},{\"alias\":\"出水温度\",\"dataAddress\":\"32\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"13\",\"itemname\":\"出水温度\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"90\"},{\"alias\":\"水箱温度\",\"dataAddress\":\"33\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"14\",\"itemname\":\"水箱温度\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"91\"},{\"alias\":\"排气温度1\",\"dataAddress\":\"34\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"15\",\"itemname\":\"排气温度1\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"105\"},{\"alias\":\"排气温度2\",\"dataAddress\":\"35\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"16\",\"itemname\":\"排气温度2\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"50\"},{\"alias\":\"除霜状态\",\"dataAddress\":\"102\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"17\",\"itemname\":\"除霜状态\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"压机1运行状态\",\"dataAddress\":\"103\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"18\",\"itemname\":\"压机1运行状态\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"1\"},{\"alias\":\"室内风机运行状态\",\"dataAddress\":\"103\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"19\",\"itemname\":\"室内风机运行状态\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"补水阀状态\",\"dataAddress\":\"104\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"20\",\"itemname\":\"补水阀状态\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"回水阀状态\",\"dataAddress\":\"104\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"21\",\"itemname\":\"回水阀状态\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"供水泵状态\",\"dataAddress\":\"104\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"22\",\"itemname\":\"供水泵状态\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"1\"},{\"alias\":\"循环水泵状态\",\"dataAddress\":\"104\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"23\",\"itemname\":\"循环水泵状态\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"1\"},{\"alias\":\"电加热状态\",\"dataAddress\":\"104\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"24\",\"itemname\":\"电加热状态\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"室外风机运行状态\",\"dataAddress\":\"104\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"25\",\"itemname\":\"室外风机运行状态\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"3\"},{\"alias\":\"控器温度传感器故障\",\"dataAddress\":\"111\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"26\",\"itemname\":\"控器温度传感器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"室温1温度传感器故障\",\"dataAddress\":\"111\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"27\",\"itemname\":\"室温1温度传感器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"内环温度传感器故障\",\"dataAddress\":\"111\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"28\",\"itemname\":\"内环温度传感器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"内盘温度传感器故障\",\"dataAddress\":\"111\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"29\",\"itemname\":\"内盘温度传感器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"回管温度传感器故障\",\"dataAddress\":\"111\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"30\",\"itemname\":\"回管温度传感器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"水管温度传感器故障\",\"dataAddress\":\"112\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"31\",\"itemname\":\"水管温度传感器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"水箱温度传感器故障\",\"dataAddress\":\"112\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"32\",\"itemname\":\"水箱温度传感器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"冷媒进口温传器故障\",\"dataAddress\":\"112\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"33\",\"itemname\":\"冷媒进口温传器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"机冷媒口度传器故障\",\"dataAddress\":\"112\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"34\",\"itemname\":\"机冷媒口度传器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"排气温度传感器故障\",\"dataAddress\":\"112\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"35\",\"itemname\":\"排气温度传感器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"环境温度传感器故障\",\"dataAddress\":\"112\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"36\",\"itemname\":\"环境温度传感器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"外盘温度传感器故障\",\"dataAddress\":\"112\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"37\",\"itemname\":\"外盘温度传感器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"外机温度传感器故障\",\"dataAddress\":\"112\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"38\",\"itemname\":\"外机温度传感器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"外温度传感器故障\",\"dataAddress\":\"113\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"39\",\"itemname\":\"外温度传感器故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"经济器温度传感故障\",\"dataAddress\":\"113\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"40\",\"itemname\":\"经济器温度传感故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"经济器出口传感故障\",\"dataAddress\":\"113\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"41\",\"itemname\":\"经济器出口传感故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"外风机过载\",\"dataAddress\":\"113\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"42\",\"itemname\":\"外风机过载\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"内风机过载\",\"dataAddress\":\"113\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"43\",\"itemname\":\"内风机过载\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"循环泵过载\",\"dataAddress\":\"113\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"44\",\"itemname\":\"循环泵过载\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"供水泵过载\",\"dataAddress\":\"114\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"45\",\"itemname\":\"供水泵过载\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"压机气温度过高故障\",\"dataAddress\":\"114\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"46\",\"itemname\":\"压机气温度过高故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"与外机通讯故障\",\"dataAddress\":\"116\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"47\",\"itemname\":\"与外机通讯故障\",\"quality\":\"g\",\"readOnly\":true,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"电源开关\",\"dataAddress\":\"223\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"48\",\"itemname\":\"电源开关\",\"quality\":\"g\",\"readOnly\":false,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"温度设定\",\"dataAddress\":\"224\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"49\",\"itemname\":\"温度设定\",\"quality\":\"g\",\"readOnly\":false,\"specificType\":\"1\",\"val\":\"0\"},{\"alias\":\"模式控制\",\"dataAddress\":\"225\",\"datatype\":\"3\",\"devName\":\"3020009_CHLRD_12GW_DPB\",\"devid\":\"-1202477823\",\"htime\":\"2020-01-13 15:20:36.657\",\"itemid\":\"50\",\"itemname\":\"模式控制\",\"quality\":\"g\",\"readOnly\":false,\"specificType\":\"1\",\"val\":\"0\"}]}";
//		slRemoteService.initSLMap();
		JSONObject jsonObject = JSONObject.parseObject(json);
		slRemoteService.handle(jsonObject);
	}

	@Autowired
	ServiceApi serviceApi;

	@Test
	public void ddddd(){
//		serviceApi.refreshAccessToken();
//		serviceApi.getRealTimeData();
		slRemoteService.initSLMap();
	}

}
